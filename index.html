<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https://images.unsplash.com https://garnetgrid.com https://poppin.garnetgrid.com; connect-src 'self' https://formspree.io; form-action 'self' https://formspree.io">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POPPIN ‚Äî See What's Poppin. NYC Nightlife, Live.</title>
    <meta name="theme-color" content="#1A0A2E">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" sizes="180x180" href="img/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="192x192" href="img/icon-192.png">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="POPPIN">
    <meta property="og:image" content="https://poppin.garnetgrid.com/img/icon-512.png">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content="https://poppin.garnetgrid.com/img/icon-512.png">
    <meta name="description"
        content="POPPIN is the membership-based platform for NYC nightlife. See what's poppin at bars across the 5 boroughs via live cameras, vote, comment, and organize events.">
    <meta property="og:title" content="POPPIN ‚Äî NYC Nightlife, Live">
    <meta property="og:description"
        content="See what's happening at every bar across the 5 boroughs. Live feeds, comments, voting, and events.">
    <link rel="canonical" href="https://poppin.garnetgrid.com/">
    <meta property="og:url" content="https://poppin.garnetgrid.com/">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>

    <div class="login-page">
        <!-- Left Brand Side -->
        <div class="login-brand">
            <div class="floating-orb orb-1"></div>
            <div class="floating-orb orb-2"></div>
            <div class="floating-orb orb-3"></div>

            <img src="img/poppin-logo.svg" alt="POPPIN Logo" class="brand-logo-main">
            <p class="tagline">See What's Poppin.<br>NYC Nightlife, Live.</p>

            <div class="features-preview">
                <div class="feature-item"><span class="icon">üìπ</span> Live camera feeds from 40+ NYC bars</div>
                <div class="feature-item"><span class="icon">üí¨</span> Real-time comments with timestamps</div>
                <div class="feature-item"><span class="icon">üî•</span> Vote for tonight's hottest spot</div>
                <div class="feature-item"><span class="icon">üéâ</span> Organize & RSVP to events across the boroughs
                </div>
                <div class="feature-item"><span class="icon">üèÜ</span> Leaderboard rankings ‚Äî who's #1?</div>
            </div>

            <div class="meta-analytics"
                style="display: flex; gap: 20px; margin-top: 30px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 20px;">
                <div class="stat">
                    <div style="font-size: 1.5rem; font-weight: 800; color: var(--gold-primary);">100+</div>
                    <div style="font-size: 0.8rem; color: var(--text-muted); text-transform: uppercase;">Live Bars</div>
                </div>
                <div class="stat">
                    <div style="font-size: 1.5rem; font-weight: 800; color: var(--purple-light);">50K+</div>
                    <div style="font-size: 0.8rem; color: var(--text-muted); text-transform: uppercase;">Active Users
                    </div>
                </div>
                <div class="stat">
                    <div style="font-size: 1.5rem; font-weight: 800; color: #00FF80;">5</div>
                    <div style="font-size: 0.8rem; color: var(--text-muted); text-transform: uppercase;">Boroughs</div>
                </div>
            </div>

            <div class="testimonials"
                style="margin-top: 30px; background: rgba(0,0,0,0.3); padding: 15px; border-radius: 12px; border-left: 3px solid var(--gold-primary);">
                <p style="font-style: italic; font-size: 0.9rem; color: #ddd; margin-bottom: 8px;">"POPPIN completely
                    changed how we go out. No more guessing if a bar is dead or packed before paying an Uber."</p>
                <div style="display: flex; align-items: center; gap: 10px;">
                    <div
                        style="width: 30px; height: 30px; border-radius: 50%; background: var(--purple-primary); display: flex; align-items: center; justify-content: center; font-size: 0.8rem;">
                        SAR</div>
                    <div style="font-size: 0.8rem;">
                        <span style="font-weight: bold; color: #fff;">Sarah M.</span><br>
                        <span
                            style="color: var(--gold-primary); font-size: 0.7rem; text-transform: uppercase; font-weight: bold;">VIP
                            Member</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Auth Side -->
        <div class="login-form-side">
            <div class="login-form-container">

                <div class="auth-toggle">
                    <button class="active" id="loginTab" onclick="switchAuth('login')">Sign In</button>
                    <button id="registerTab" onclick="switchAuth('register')">Request Beta</button>
                </div>

                <!-- Login Form -->
                <div id="loginForm">
                    <h2>Welcome Back</h2>
                    <p class="subtitle">Sign in to see what's poppin tonight</p>

                    <form onsubmit="handleLogin(event)">
                        <input type="hidden" name="csrfToken" class="csrfToken">
                        <div class="form-group">
                            <label class="form-label" for="loginUser">Username</label>
                            <input type="text" id="loginUser" class="form-input" placeholder="Enter your username"
                                required autocomplete="username">
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="loginPass">Password</label>
                            <div class="password-toggle">
                                <input type="password" id="loginPass" class="form-input"
                                    placeholder="Enter your password" required autocomplete="current-password">
                                <button type="button" class="toggle-eye"
                                    onclick="togglePassword('loginPass', this)">üëÅÔ∏è</button>
                            </div>
                            <div class="form-error" id="loginError">Invalid username or password</div>
                        </div>

                        <button type="submit" class="btn btn-gold btn-block btn-lg">Sign In</button>
                    </form>

                    <div class="form-footer">
                        Don't have an account? <a href="#" onclick="switchAuth('register')">Request Beta Access</a>
                    </div>
                </div>

                <!-- Beta Request Form (Replaces Register) -->
                <div id="registerForm" style="display:none">
                    <h2>Beta Access</h2>
                    <p class="subtitle">POPPIN is currently invite-only. Request a beta account.</p>

                    <form action="https://formspree.io/f/xqedgzne" method="POST">
                        <div class="form-group">
                            <label class="form-label" for="betaName">Name / Alias</label>
                            <input type="text" id="betaName" name="name" class="form-input"
                                placeholder="Your name or IG handle" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="betaEmail">Email Address</label>
                            <input type="email" id="betaEmail" name="email" class="form-input"
                                placeholder="name@email.com" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="betaMessage">Why do you want access?</label>
                            <textarea id="betaMessage" name="message" class="form-input"
                                placeholder="Tell us where you like to party..." rows="3" required
                                style="resize: vertical;"></textarea>
                        </div>

                        <button type="submit" class="btn btn-gold btn-block btn-lg">Request Invite</button>
                    </form>

                    <div class="form-footer">
                        Already approved? <a href="#" onclick="switchAuth('login')">Sign In</a>
                    </div>
                </div>

                <div class="form-divider">Membership starts at $9.99/mo</div>

                <div style="text-align:center; margin-top: var(--space-md);">
                    <a href="pricing.html" style="font-size:0.78rem; color: var(--text-muted);">View membership tiers
                        ‚Üí</a>
                </div>
            </div>
        </div>
    </div>

    <script src="js/data.js"></script>
    <script src="js/membership.js"></script>
    <script>
        function generateCSRFToken() {
            const token = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);
            sessionStorage.setItem('poppin_csrf', token);
            document.querySelectorAll('.csrfToken').forEach(el => el.value = token);
        }
        document.addEventListener('DOMContentLoaded', generateCSRFToken);

        // Redirect if already logged in
        const existingUser = localStorage.getItem('poppin_user');
        if (existingUser) window.location.href = 'dashboard.html';

        function switchAuth(mode) {
            const isLogin = mode === 'login';
            document.getElementById('loginForm').style.display = isLogin ? 'block' : 'none';
            document.getElementById('registerForm').style.display = isLogin ? 'none' : 'block';
            document.getElementById('loginTab').classList.toggle('active', isLogin);
            document.getElementById('registerTab').classList.toggle('active', !isLogin);
        }

        function togglePassword(inputId, btn) {
            const input = document.getElementById(inputId);
            const isPassword = input.type === 'password';
            input.type = isPassword ? 'text' : 'password';
            btn.textContent = isPassword ? 'üôà' : 'üëÅÔ∏è';
        }

        function handleLogin(e) {
            e.preventDefault();
            const token = e.target.querySelector('input[name="csrfToken"]').value;
            if (token !== sessionStorage.getItem('poppin_csrf')) {
                alert('Security Error: CSRF Token Validation Failed.');
                return;
            }
            const username = document.getElementById('loginUser').value;
            const password = document.getElementById('loginPass').value;
            const user = POPPIN.authenticate(username, password);

            if (user) {
                POPPIN.login(user);
                window.location.href = 'dashboard.html';
            } else {
                document.getElementById('loginError').classList.add('show');
                document.getElementById('loginPass').value = '';
                setTimeout(() => document.getElementById('loginError').classList.remove('show'), 4000);
            }
        }


    </script>
    <script src="js/protect.js"></script>
    <div style="text-align:center;padding:1.2rem 0 1rem;opacity:0.7">
        <a href="https://garnetgrid.com" target="_blank" rel="noopener"
            style="color:#aaa;font-size:0.72rem;text-decoration:none;display:inline-flex;align-items:center;gap:4px"
            title="Built by GarnetGrid">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="14" height="14"
                style="width:14px;height:14px;min-width:14px">
                <defs>
                    <linearGradient id="gf1" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" stop-color="#9b1b30" />
                        <stop offset="100%" stop-color="#d4374a" />
                    </linearGradient>
                    <linearGradient id="gf2" x1="100%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" stop-color="#e63946" />
                        <stop offset="100%" stop-color="#7a1525" />
                    </linearGradient>
                    <linearGradient id="gf3" x1="50%" y1="0%" x2="50%" y2="100%">
                        <stop offset="0%" stop-color="#ff6b6b" />
                        <stop offset="100%" stop-color="#c0392b" />
                    </linearGradient>
                </defs>
                <style>
                    @keyframes facet-shimmer {

                        0%,
                        100% {
                            opacity: 0
                        }

                        15% {
                            opacity: .9
                        }

                        30% {
                            opacity: 0
                        }
                    }

                    @keyframes gem-rotate {

                        0%,
                        100% {
                            transform: rotate(0) scale(1)
                        }

                        25% {
                            transform: rotate(3deg) scale(1.02)
                        }

                        75% {
                            transform: rotate(-3deg) scale(1.02)
                        }
                    }

                    @keyframes sparkle-pop {

                        0%,
                        100% {
                            opacity: 0;
                            transform: scale(0)
                        }

                        50% {
                            opacity: 1;
                            transform: scale(1)
                        }
                    }

                    .gem-body {
                        transform-origin: 12px 12px;
                        animation: gem-rotate 4s ease-in-out infinite
                    }

                    .shimmer-1 {
                        animation: facet-shimmer 3s ease-in-out infinite
                    }

                    .shimmer-2 {
                        animation: facet-shimmer 3s ease-in-out infinite;
                        animation-delay: 1s
                    }

                    .shimmer-3 {
                        animation: facet-shimmer 3s ease-in-out infinite;
                        animation-delay: 2s
                    }

                    .sparkle {
                        transform-origin: center;
                        animation: sparkle-pop 2.5s ease-in-out infinite
                    }

                    .sparkle:nth-child(2) {
                        animation-delay: .8s
                    }

                    .sparkle:nth-child(3) {
                        animation-delay: 1.6s
                    }
                </style>
                <g class="gem-body">
                    <polygon points="12,22 4,10 20,10" fill="url(#gf1)" />
                    <polygon points="4,10 8,3 12,6 12,10" fill="url(#gf2)" />
                    <polygon points="20,10 16,3 12,6 12,10" fill="url(#gf3)" />
                    <polygon points="8,3 12,1.5 16,3 12,6" fill="#e63946" />
                    <polygon points="4,10 12,10 12,22" fill="url(#gf2)" opacity=".7" />
                    <polygon points="20,10 12,10 12,22" fill="url(#gf1)" opacity=".8" />
                    <polygon class="shimmer-1" points="4,10 12,10 12,22" fill="white" opacity="0" />
                    <polygon class="shimmer-2" points="20,10 12,10 12,22" fill="white" opacity="0" />
                    <polygon class="shimmer-3" points="8,3 12,1.5 16,3 12,6" fill="white" opacity="0" />
                </g>
                <g>
                    <circle class="sparkle" cx="3" cy="5" r=".8" fill="white" opacity="0" />
                    <circle class="sparkle" cx="21" cy="4" r=".6" fill="white" opacity="0" />
                    <circle class="sparkle" cx="22" cy="16" r=".7" fill="white" opacity="0" />
                </g>
            </svg>
            Built by GarnetGrid
        </a>
    </div>
</body>

</html>